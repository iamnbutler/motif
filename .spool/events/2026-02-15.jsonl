{"v":1,"op":"create","id":"mln1grs2-pja4","ts":"2026-02-15T01:00:23.330746Z","by":"@iamnbutler","branch":"main","d":{"description":"Create AccessTree type that collects accessibility nodes during drawing, parallel to how Scene collects Quads. DrawContext should build both simultaneously. AccessTree provides the data needed to generate AccessKit TreeUpdates.","priority":"p1","stream":"mllpwi2y-uv1c","title":"Design AccessTree type that mirrors Scene for accessibility"}}
{"v":1,"op":"create","id":"mln1gtqw-n4l0","ts":"2026-02-15T01:00:25.880497Z","by":"@iamnbutler","branch":"main","d":{"description":"Create AccessNode with: id (NodeId), role (Role), name/label, bounds (Rect), children, actions (click, focus, etc). This is motif's accessibility primitive, converted to AccessKit Node during tree building.","priority":"p1","stream":"mllpwi2y-uv1c","title":"Define AccessNode type for UI element accessibility info"}}
{"v":1,"op":"create","id":"mln1guy2-gpxq","ts":"2026-02-15T01:00:27.434992Z","by":"@iamnbutler","branch":"main","d":{"description":"Track focused element ID, handle focus-next/focus-prev actions from AccessKit. Focus state affects both rendering (focus ring) and accessibility tree (focus property in TreeUpdate).","priority":"p1","stream":"mllpwi2y-uv1c","title":"Focus manager for keyboard navigation"}}
{"v":1,"op":"update","id":"mllpwovm-ury2","ts":"2026-02-15T01:00:35.622840Z","by":"@iamnbutler","branch":"main","d":{"description":"Design how AccessKit's adapter integrates with motif's architecture:\n\nDECISION: Parallel tree model\n- Scene collects Quads for rendering\n- AccessTree collects AccessNodes for accessibility\n- DrawContext builds both in one pass\n- Avoids two traversals, keeps them in sync\n\nIntegration points:\n1. App creates Adapter::with_event_loop_proxy at window init\n2. adapter.process_event() called before handling winit events\n3. After each frame, compare AccessTree to previous, send TreeUpdate if changed\n4. ActionHandler routes actions (click, focus) back to app state\n\nKey types needed:\n- AccessTree: container for AccessNodes, generates TreeUpdates\n- AccessNode: motif's accessibility primitive\n- FocusManager: tracks focused element, handles navigation"}}
{"v":1,"op":"update","id":"mllpwpib-va1h","ts":"2026-02-15T01:00:42.866777Z","by":"@iamnbutler","branch":"main","d":{"description":"Wire AccessKit adapter into motif's event loop:\n\n1. In App::resumed(), after window creation:\n   let adapter = Adapter::with_event_loop_proxy(event_loop, &window, proxy.clone());\n   \n2. In App::window_event(), BEFORE handling event:\n   adapter.process_event(&window, &event);\n   \n3. Handle AccessKitWindowEvent::InitialTreeRequested\n   - Return initial TreeUpdate from current AccessTree\n   \n4. Handle AccessKitWindowEvent::ActionRequested  \n   - Route to app state (click handlers, focus changes)\n\n5. After frame render, if AccessTree changed:\n   adapter.update_if_active(|| tree_update)"}}
{"v":1,"op":"assign","id":"mllpwncw-psjx","ts":"2026-02-15T01:00:57.350346Z","by":"@iamnbutler","branch":"main","d":{"to":"@iamnbutler"}}
{"v":1,"op":"complete","id":"mllpwncw-psjx","ts":"2026-02-15T01:01:46.879810Z","by":"@iamnbutler","branch":"main","d":{"resolution":"done"}}
{"v":1,"op":"assign","id":"mln1gtqw-n4l0","ts":"2026-02-15T01:01:51.854677Z","by":"@iamnbutler","branch":"main","d":{"to":"@iamnbutler"}}
{"v":1,"op":"complete","id":"mln1gtqw-n4l0","ts":"2026-02-15T01:03:52.024708Z","by":"@iamnbutler","branch":"main","d":{"resolution":"done"}}
{"v":1,"op":"assign","id":"mln1grs2-pja4","ts":"2026-02-15T01:03:55.811121Z","by":"@iamnbutler","branch":"main","d":{"to":"@iamnbutler"}}
{"v":1,"op":"complete","id":"mln1grs2-pja4","ts":"2026-02-15T01:04:58.258818Z","by":"@iamnbutler","branch":"main","d":{"resolution":"done"}}
{"v":1,"op":"assign","id":"mln1guy2-gpxq","ts":"2026-02-15T01:05:02.311697Z","by":"@iamnbutler","branch":"main","d":{"to":"@iamnbutler"}}
{"v":1,"op":"complete","id":"mln1guy2-gpxq","ts":"2026-02-15T01:05:37.292635Z","by":"@iamnbutler","branch":"main","d":{"resolution":"done"}}
{"v":1,"op":"complete","id":"mllpwovm-ury2","ts":"2026-02-15T01:05:47.209444Z","by":"@iamnbutler","branch":"main","d":{"resolution":"done"}}
{"v":1,"op":"assign","id":"mllpwpib-va1h","ts":"2026-02-15T01:05:47.230443Z","by":"@iamnbutler","branch":"main","d":{"to":"@iamnbutler"}}
{"v":1,"op":"complete","id":"mllpwpib-va1h","ts":"2026-02-15T01:07:23.879923Z","by":"@iamnbutler","branch":"main","d":{"resolution":"done"}}
{"v":1,"op":"assign","id":"mllpjehg-rwi5","ts":"2026-02-15T01:17:57.775106Z","by":"@iamnbutler","branch":"main","d":{"to":"@iamnbutler"}}
{"v":1,"op":"complete","id":"mllpjehg-rwi5","ts":"2026-02-15T01:18:39.279040Z","by":"@iamnbutler","branch":"main","d":{"resolution":"done"}}
{"v":1,"op":"assign","id":"mllpjfjw-2c1h","ts":"2026-02-15T01:18:39.303824Z","by":"@iamnbutler","branch":"main","d":{"to":"@iamnbutler"}}
{"v":1,"op":"complete","id":"mllpjfjw-2c1h","ts":"2026-02-15T01:21:35.484069Z","by":"@iamnbutler","branch":"main","d":{"resolution":"done"}}
{"v":1,"op":"assign","id":"mllpjh1v-ncd5","ts":"2026-02-15T01:42:23.699464Z","by":"@iamnbutler","branch":"main","d":{"to":"@iamnbutler"}}
{"v":1,"op":"complete","id":"mllpjh1v-ncd5","ts":"2026-02-15T01:44:20.949771Z","by":"@iamnbutler","branch":"main","d":{"resolution":"done"}}
{"v":1,"op":"assign","id":"mllpjhpq-ykl5","ts":"2026-02-15T01:44:37.176124Z","by":"@iamnbutler","branch":"main","d":{"to":"@iamnbutler"}}
{"v":1,"op":"complete","id":"mllpjhpq-ykl5","ts":"2026-02-15T01:45:17.964115Z","by":"@iamnbutler","branch":"main","d":{"resolution":"done"}}
{"v":1,"op":"assign","id":"mllpjjoh-vytg","ts":"2026-02-15T01:45:34.943694Z","by":"@iamnbutler","branch":"main","d":{"to":"@iamnbutler"}}
{"v":1,"op":"complete","id":"mllpjjoh-vytg","ts":"2026-02-15T01:46:26.592435Z","by":"@iamnbutler","branch":"main","d":{"resolution":"done"}}
{"v":1,"op":"assign","id":"mllpjinl-z71j","ts":"2026-02-15T01:49:55.723378Z","by":"@iamnbutler","branch":"main","d":{"to":"@iamnbutler"}}
{"v":1,"op":"complete","id":"mllpjinl-z71j","ts":"2026-02-15T01:53:06.281618Z","by":"@iamnbutler","branch":"main","d":{"resolution":"done"}}
{"v":1,"op":"create","id":"mln3ksrs-hcp7","ts":"2026-02-15T01:59:30.472399Z","by":"@iamnbutler","branch":"main","d":{"description":"Glyphs are stacking on top of each other instead of being positioned correctly. Likely issue with glyph x/y positioning in build_glyph_instances - need to accumulate advance or check how glyph.x/y are being used from the TextRun.","priority":"p0","stream":"mllpgvb5-6fiv","tags":["bug"],"title":"Bug: text glyphs rendering at same position"}}
{"v":1,"op":"assign","id":"mln3ksrs-hcp7","ts":"2026-02-15T01:59:35.875238Z","by":"@iamnbutler","branch":"main","d":{"to":"@iamnbutler"}}
{"v":1,"op":"update","id":"mln3ksrs-hcp7","ts":"2026-02-15T02:02:33.821427Z","by":"@iamnbutler","branch":"main","d":{"description":"Glyphs were stacking because glyph_runs_with_font() wasn't accumulating advances. Fixed by:\n1. Getting run's starting offset with run.offset()\n2. Getting baseline Y with run.baseline()  \n3. Calculating each glyph's absolute position as: pen_x + glyph.x\n4. Advancing pen by glyph.advance after each glyph\n\nRoot cause: parley's glyph.x is an offset from pen position, not an absolute position."}}
{"v":1,"op":"complete","id":"mln3ksrs-hcp7","ts":"2026-02-15T02:02:38.895496Z","by":"@iamnbutler","branch":"main","d":{"resolution":"done"}}
{"v":1,"op":"create","id":"mln62vug-8974","ts":"2026-02-15T03:09:33.496674Z","by":"@iamnbutler","branch":"main","d":{"description":"Position parameter was being used as layout origin, not baseline position. Fixed by subtracting baseline offset from origin so the text baseline lands at the specified y coordinate.","priority":"p1","stream":"mllpgvb5-6fiv","title":"Fix baseline positioning in paint_text"}}
{"v":1,"op":"complete","id":"mln62vug-8974","ts":"2026-02-15T03:09:33.526360Z","by":"@iamnbutler","branch":"main","d":{"resolution":"done"}}
{"v":1,"op":"create","id":"mln6306s-wi02","ts":"2026-02-15T03:09:39.124036Z","by":"@iamnbutler","branch":"main","d":{"description":"Expose swash font metrics (ascent, descent, cap_height, x_height, etc.) and parley line metrics through TextLayout for use in debugging and accessibility.","priority":"p2","stream":"mllpgvb5-6fiv","title":"Add FontMetrics and LineLayoutMetrics types"}}
{"v":1,"op":"complete","id":"mln6306s-wi02","ts":"2026-02-15T03:09:39.159201Z","by":"@iamnbutler","branch":"main","d":{"resolution":"done"}}
{"v":1,"op":"create","id":"mln635v3-7dyl","ts":"2026-02-15T03:09:46.479749Z","by":"@iamnbutler","branch":"main","d":{"description":"When rendering multiple quads via instancing, only some instances appear. Affects both quad rendering and text metrics debug visualization. Likely an issue with instance buffer upload or draw call. Need to investigate buffer sizing, alignment, or draw parameters.","priority":"p0","stream":"mliupru8-vi36","tags":["bug"],"title":"Bug: Metal quad instancing issue - only some instances render"}}
{"v":1,"op":"create","id":"mln639hq-pn7f","ts":"2026-02-15T03:09:51.182791Z","by":"@iamnbutler","branch":"main","d":{"description":"Visual debug example showing typographic metrics (ascent, descent, cap height, x-height, baseline). Blocked by Metal instancing bug - only some metric lines render.","priority":"p3","stream":"mllpgvb5-6fiv","tags":["blocked"],"title":"Text metrics debug example"}}
{"v":1,"op":"assign","id":"mllpwri9-2134","ts":"2026-02-15T03:34:46.774921Z","by":"@iamnbutler","branch":"main","d":{"to":"@iamnbutler"}}
{"v":1,"op":"complete","id":"mllpwri9-2134","ts":"2026-02-15T03:37:14.386244Z","by":"@iamnbutler","branch":"main","d":{"resolution":"done"}}
{"v":1,"op":"update","id":"mllpwri9-2134","ts":"2026-02-15T03:37:14.411458Z","by":"@iamnbutler","branch":"main","d":{"description":"Text primitives now expose their content to screen readers when accessibility is enabled. Implementation:\n- DrawContext::with_accessibility() creates context with AccessTree\n- paint_text() automatically creates AccessNode with role Label, text content, and bounds\n- Updated hello_accessible example to demonstrate text accessibility with VoiceOver"}}
